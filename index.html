<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dart Set & Leg Counter</title>

<style>
:root{
  --pA:#d61f26;
  --pB:#14a44d;
  --bg:#0b0f14;
  --panel:#141821;
  --text:#f7f8fb;
  --muted:#9aa0aa;
  --radius:18px;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:linear-gradient(180deg,#0f1117,#05070a);
  color:var(--text);
  padding:14px;
}

.card{
  background:linear-gradient(180deg,#151a25,#0f131d);
  border-radius:var(--radius);
  padding:16px;
  margin-bottom:16px;
  box-shadow:0 18px 40px rgba(0,0,0,.55);
}

/* ================= NAVBAR ================= */
.navbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:18px;
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
}

.brandIcon{
  width:42px;
  height:42px;
  border-radius:14px;
  padding:6px;
  background:linear-gradient(135deg,rgba(255,255,255,.12),rgba(255,255,255,.04));
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.18),
    0 14px 28px rgba(0,0,0,.45);
}

.brandIcon img{
  width:100%;
  height:100%;
  object-fit:contain;
  filter:drop-shadow(0 6px 14px rgba(0,0,0,.6));
}

.brandTitle{
  font-size:20px;
  font-weight:1000;
  letter-spacing:.3px;
}

/* ================= FORM ================= */
.row{display:grid;gap:12px}
@media(min-width:640px){.row.cols2{grid-template-columns:1fr 1fr}}

input,select,button{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:none;
  font-size:16px;
}

input,select{
  background:#0c1019;
  color:var(--text);
}

button{
  background:#1c2230;
  color:var(--text);
  font-weight:900;
  cursor:pointer;
}

button.primary{
  background:linear-gradient(180deg,var(--pA),#a5141a);
}

button:active{transform:scale(.98)}

.hidden{display:none}

/* ================= SWITCH ================= */
.switchRow{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.switch{
  width:54px;height:30px;position:relative;
}
.switch input{display:none}
.slider{
  position:absolute;inset:0;
  background:#333;border-radius:99px;
}
.slider:before{
  content:"";
  position:absolute;
  left:4px;top:4px;
  width:22px;height:22px;
  border-radius:50%;
  background:white;
  transition:.2s;
}
.switch input:checked + .slider{
  background:var(--pB)
}
.switch input:checked + .slider:before{
  transform:translateX(24px)
}

/* ================= SCORE ================= */
.scoreRow{
  display:grid;
  grid-template-columns:40px 1fr 60px 60px;
  align-items:center;
  padding:12px;
  border-radius:14px;
  margin-bottom:8px;
  user-select:none;
}
.scoreRow.A{background:rgba(214,31,38,.22)}
.scoreRow.B{background:rgba(20,164,77,.22)}

.name{font-weight:1000;font-size:18px}
.num{text-align:center;font-size:24px;font-weight:1000}

/* ================= LOG ================= */
.log{
  margin-top:12px;
  background:#0a0d14;
  border-radius:14px;
  padding:12px;
  font-family:monospace;
  font-size:13px;
  max-height:180px;
  overflow:auto;
}

/* ================= FOOTER ================= */
.footer{
  display:flex;
  align-items:center;
  gap:12px;
  font-size:13px;
  color:var(--muted);
}
.footer img{
  width:38px;height:38px;
  border-radius:50%;
  object-fit:cover;
}
</style>
</head>

<body>

<!-- SETUP -->
<div id="setup">
  <div class="navbar">
    <div class="brand">
      <div class="brandIcon">
        <img src="assets/logo.png" alt="Dart Set & Leg Counter Logo">
      </div>
      <div class="brandTitle">Dart Set & Leg Counter</div>
    </div>
  </div>

  <div class="card">
    <div class="row cols2">
      <input id="nameA" value="Spieler A">
      <input id="nameB" value="Spieler B">
    </div>

    <div class="row cols2">
      <select id="sets"></select>
      <select id="legs"></select>
    </div>

    <div class="switchRow">
      <span>Haptik</span>
      <label class="switch">
        <input type="checkbox" id="haptic" checked>
        <span class="slider"></span>
      </label>
    </div>

    <div class="switchRow">
      <span>Sound</span>
      <label class="switch">
        <input type="checkbox" id="sound" checked>
        <span class="slider"></span>
      </label>
    </div>

    <button class="primary" onclick="start()">Spiel starten</button>
  </div>
</div>

<!-- GAME -->
<div id="game" class="hidden">
  <div class="navbar">
    <div class="brand">
      <div class="brandIcon">
        <img src="assets/logo.png" alt="">
      </div>
      <div class="brandTitle">Dart Set & Leg Counter</div>
    </div>
  </div>

  <div class="card">
    <div class="scoreRow A" onclick="addLeg('A')">
      <div>▶</div>
      <div class="name" id="nA"></div>
      <div class="num" id="sA">0</div>
      <div class="num" id="lA">0</div>
    </div>

    <div class="scoreRow B" onclick="addLeg('B')">
      <div></div>
      <div class="name" id="nB"></div>
      <div class="num" id="sB">0</div>
      <div class="num" id="lB">0</div>
    </div>

    <button onclick="undo()">Rückgängig</button>
    <button onclick="location.reload()">Neues Match</button>

    <div class="log" id="log"></div>
  </div>
</div>

<div class="card footer">
  <img src="https://via.placeholder.com/150">
  <div>Diese App wird präsentiert von Nici (den aber jeder nur Nico nennt)</div>
</div>

<script>
let S={A:0,B:0},L={A:0,B:0},LT={A:0,B:0},H=[];
let FS=3,FL=3,turn="A";

for(let i=1;i<=7;i++){
  sets.innerHTML+=`<option value="${i}">First to ${i} Sets</option>`;
  legs.innerHTML+=`<option value="${i}">First to ${i} Legs</option>`;
}
sets.value=3;legs.value=3;

function vib(p=15){
  if(haptic.checked && navigator.vibrate) navigator.vibrate(p);
}

let ac;
function cheer(){
  if(!sound.checked) return;
  ac=ac||new (window.AudioContext||webkitAudioContext)();
  let o=ac.createOscillator(),g=ac.createGain();
  o.frequency.value=440;o.type="sawtooth";
  g.gain.value=.12;
  o.connect(g);g.connect(ac.destination);
  o.start();setTimeout(()=>o.stop(),350);
}

function log(t){
  logEl.textContent=t+"\n────────────\n"+logEl.textContent;
}

function start(){
  FS=+sets.value;FL=+legs.value;
  nA.textContent=nameA.value;
  nB.textContent=nameB.value;
  setup.classList.add("hidden");
  game.classList.remove("hidden");
  log("Match gestartet");
}

function addLeg(p){
  H.push(JSON.stringify({S,L,LT,turn}));
  vib();
  L[p]++;LT[p]++;
  log("Leg an "+(p==="A"?nA.textContent:nB.textContent));
  if(L[p]>=FL){
    S[p]++;L.A=L.B=0;
    log("Set an "+(p==="A"?nA.textContent:nB.textContent));
    if(S[p]>=FS){cheer();alert("Match gewonnen!")}
  }
  update();turn=turn==="A"?"B":"A";
}

function undo(){
  let h=H.pop();if(!h)return;
  let o=JSON.parse(h);
  S=o.S;L=o.L;LT=o.LT;turn=o.turn;
  vib([20,40,20]);
  log("Rückgängig");
  update();
}

function update(){
  sA.textContent=S.A;sB.textContent=S.B;
  lA.textContent=L.A;lB.textContent=L.B;
}

const logEl=document.getElementById("log");
</script>

</body>
</html>