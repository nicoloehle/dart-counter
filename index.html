<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Dart Set & Leg Counter</title>

<style>
/* =======================
   BASIS / FARBEN
======================= */
:root{
  --dart-red:#b8161c;
  --dart-green:#0f7a2b;
  --dart-black:#0b0f14;
  --dart-white:#f7f8fb;

  --bg:var(--dart-green);
  --panel:#11151d;
  --panel-border:rgba(255,255,255,.15);

  --text:#fff;
  --muted:rgba(255,255,255,.8);

  --radius:18px;
}

*{box-sizing:border-box}
html,body{
  margin:0;
  padding:0;
  min-height:100%;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  overflow-x:hidden;
}

button,input,select{
  font-family:inherit;
  font-size:16px;
}

.hidden{display:none!important}

/* =======================
   NAVBAR
======================= */
.navbar{
  background:var(--dart-red);
  padding:12px 14px;
  border-radius:18px;
  margin:14px;
  display:flex;
  align-items:center;
  gap:12px;
  box-shadow:0 14px 28px rgba(0,0,0,.3);
}

.logoImg{
  width:44px;
  height:auto;
  aspect-ratio:1/1;
  border-radius:12px;
  object-fit:contain;
  background:rgba(0,0,0,.2);
}

.brandTitle{
  font-size:20px;
  font-weight:900;
  line-height:1.2;
}

/* =======================
   LAYOUT
======================= */
.wrap{
  max-width:960px;
  margin:0 auto;
  padding-bottom:40px;
}

.card{
  background:var(--panel);
  border:1px solid var(--panel-border);
  border-radius:var(--radius);
  padding:14px;
  margin:14px;
  box-shadow:0 16px 30px rgba(0,0,0,.35);
}

/* =======================
   SETUP
======================= */
.playersList{
  display:grid;
  gap:12px;
}

.playerRow{
  border:1px solid rgba(255,255,255,.15);
  border-radius:14px;
  padding:10px;
  display:grid;
  gap:10px;
}

.playerRowTop{
  display:grid;
  grid-template-columns:44px 1fr 44px;
  gap:10px;
  align-items:center;
}

.colorBtn{
  width:44px;
  height:44px;
  border-radius:50%;
  border:2px solid #fff;
  background:var(--c);
  cursor:pointer;
}

input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.2);
  background:#0003;
  color:#fff;
}

input::placeholder{color:#ccc}

input{
  enterkeyhint:done;
}

.controls{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:12px;
}

button{
  border-radius:14px;
  border:1px solid rgba(255,255,255,.2);
  background:#0004;
  color:#fff;
  padding:12px 14px;
  cursor:pointer;
  font-weight:700;
}

button.primary{
  background:var(--dart-red);
}

button.small{
  padding:8px 10px;
  font-size:14px;
}

/* =======================
   SCOREBOARD
======================= */
.scoreHeader,.scoreRow{
  display:grid;
  grid-template-columns:64px 1fr 70px 70px;
  align-items:center;
  gap:8px;
}

.scoreHeader{
  background:#fff;
  color:#000;
  padding:10px;
  font-weight:900;
  text-transform:uppercase;
}

.scoreRow{
  padding:12px 10px;
  border-bottom:1px solid rgba(255,255,255,.15);
}

.serveCell{
  background:#000;
  text-align:center;
  font-size:18px;
}

.nameCell{
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  font-weight:800;
}

.num{
  text-align:center;
  font-size:22px;
  font-weight:900;
}

/* =======================
   FOOTER
======================= */
.footer{
  display:flex;
  justify-content:center;
  padding:20px 14px;
}

.footerCard{
  background:#0004;
  border:1px solid rgba(255,255,255,.15);
  border-radius:18px;
  padding:12px;
  display:flex;
  gap:14px;
  align-items:center;
  max-width:960px;
  width:100%;
}

.footerImg{
  width:84px;
  height:auto;
  border-radius:14px;
  object-fit:contain;
}

.footerText{
  font-size:14px;
  line-height:1.35;
}
</style>
</head>

<body>
<div class="wrap">

<!-- NAVBAR -->
<div class="navbar">
  <img src="assets/logo.png" class="logoImg" alt="Logo">
  <div class="brandTitle">Dart Set &amp; Leg Counter</div>
</div>

<!-- SETUP -->
<div class="card" id="setup">
  <div class="playersList" id="playersList"></div>

  <div class="controls">
    <button id="addPlayer">+ Spieler</button>
  </div>

  <div class="controls">
    <select id="firstToSets"></select>
    <select id="legsToWin"></select>
  </div>

  <div class="controls">
    <button class="primary" id="start">Spiel starten</button>
  </div>
</div>

<!-- GAME -->
<div class="card hidden" id="game">
  <div class="scoreHeader">
    <div>Anwurf</div>
    <div>Name</div>
    <div>Sets</div>
    <div>Legs</div>
  </div>
  <div id="scoreRows"></div>

  <div class="controls">
    <button id="undo">R√ºckg√§ngig</button>
    <button class="primary" id="save">Speichern &amp; sp√§ter fortsetzen</button>
    <button id="back">Beenden &amp; zur√ºck zum Setup</button>
  </div>
</div>

<!-- FOOTER -->
<footer class="footer">
  <div class="footerCard">
    <img src="assets/nico.jpg" class="footerImg" alt="Nico">
    <div class="footerText">
      <strong>Der Counter wird dir bereitgestellt von Nici (den aber jeder leider nur Nico nennt)</strong><br><br>
      Viel Spa√ü beim Spielen und auf das ein oder andere Spa√ügetr√§nk! üçª
    </div>
  </div>
</footer>

</div>

<script>
/* =======================
   JAVASCRIPT (STABIL)
======================= */
const players=[];
const maxPlayers=6;
const minPlayers=2;

const colors=["#d61f26","#14a44d","#f2c230","#f97316","#ff3ea5","#7c3aed","#2f6bff","#1e3a8a","#7a4a2e"];

function renderPlayers(){
  const list=document.getElementById("playersList");
  list.innerHTML="";
  players.forEach((p,i)=>{
    const row=document.createElement("div");
    row.className="playerRow";
    row.innerHTML=`
      <div class="playerRowTop">
        <div class="colorBtn" style="--c:${p.color}"></div>
        <input placeholder="Spieler ${i+1}" value="${p.name||""}">
        ${i>=2?'<button onclick="removePlayer('+i+')">üóëÔ∏è</button>':"<div></div>"}
      </div>`;
    const input=row.querySelector("input");
    input.enterKeyHint="done";
    input.addEventListener("keydown",e=>{
      if(e.key==="Enter"){input.blur();}
    });
    input.addEventListener("input",()=>p.name=input.value);
    list.appendChild(row);
  });
}

function addPlayer(){
  if(players.length>=maxPlayers)return;
  players.push({name:"",color:colors[players.length%colors.length],sets:0,legs:0});
  renderPlayers();
}

function removePlayer(i){
  if(players.length<=minPlayers)return;
  players.splice(i,1);
  renderPlayers();
}

document.getElementById("addPlayer").onclick=addPlayer;

for(let i=0;i<2;i++)addPlayer();

/* Sets/Legs */
const s=document.getElementById("firstToSets");
const l=document.getElementById("legsToWin");
for(let i=1;i<=7;i++){
  s.innerHTML+=`<option>${i}</option>`;
  l.innerHTML+=`<option>${i}</option>`;
}

document.getElementById("start").onclick=()=>{
  document.getElementById("setup").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
};

document.getElementById("back").onclick=()=>{
  document.getElementById("game").classList.add("hidden");
  document.getElementById("setup").classList.remove("hidden");
};

document.getElementById("save").onclick=()=>{
  const btn=document.getElementById("save");
  btn.textContent="Gespeichert ‚úì";
  setTimeout(()=>btn.textContent="Speichern & sp√§ter fortsetzen",1200);
};
</script>
</body>
</html>